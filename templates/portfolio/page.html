{% import "macros.html" as macros %}
{% extends "layout.html" %} 


{% block page_meta %}
<title>{{page.title | default(value="untitled")}} by a.nvlkv</title>
<meta name="description" content="{{ page.description }}" />
{% endblock page_meta%} 

{% block main %}
<div class="Portfolio">
  <article class="Portfolio__showcase">
    <h2>
      {% if page.taxonomies.employer %}
        {% set employer = get_taxonomy_term(kind="employer", term=page.taxonomies.employer[0]) %}
        <a href="{{employer.path}}">{{page.title}} @ {{employer.name}}</a>
      {% else %}
        {{page.title | default(value="untitled") }}
      {% endif %}
    </h2>
    {{macros::figure(asset=page.assets[0], title=page.title)}}
    <div class="Portfolio__content">
      {{ page.content | safe }}
    </div>
    {% for asset in page.assets %}
    {% if loop.index > 1 %}
    {{macros::figure(asset=asset, title=page.title)}}
    {% endif %}
    {% endfor %}
  </article>
</div>
{% endblock main %}

{% block sidebar %}
<div class="Portfolio__sidebar">
  <nav class="Navigation Navigation--aside">
    <ul class="Navigation__list">
      <li class="Navigation__item Portfolio__nav-item">
        {{macros::nav_link(href="/portfolio", text="‚Üê Back to all")}}
      </li>
      <li class="Navigation__item Portfolio__nav-item">
        <hr/>
      </li>
      {% for term in page.taxonomies.category %}
      {% set term = get_taxonomy_term(kind='category', term=term) %}
      <li class="Navigation__item Portfolio__nav-item">
        {{macros::nav_link(href="/portfolio#"~term.slug, text=term.name | title)}}
      </li>
      {% endfor %}
    </ul>
  </nav>
</div>
{% endblock sidebar %}