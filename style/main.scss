$hover-offset: 0.86em;
$hover-duration: 250ms;
$gradient: radial-gradient(ellipse 180% 10% at 50% 100%, #a855f7, transparent);

a {
    transition-property: color;
    transition-duration: $hover-duration;
    transition-timing-function: ease-in;
}

#the-done-button {
    background: $gradient, #581c87;
    z-index: 2;
    &,
    & + div > span {
        transition-property: margin, backrgound, box-shadow;
        transition-duration: $hover-duration;
        transition-timing-function: ease-out;
    }
    & + div {
        overflow: visible;
    }
    & + div > span {
        margin-top: 0;
        margin-bottom: 0;
    }

    & + div + #emojies {
        width: 100%;
        font-size: 42%;
        display: flex;
        justify-content: center;
        align-items: end;
        pointer-events: none;
        > span {
            display: block;
            box-sizing: border-box;

            transition-property: margin, opacity, z-index;
            transition-duration: $hover-duration;
            transition-timing-function: ease-out;
            opacity: 0;

            background-color: rgba(#f5f5f4, 0.75);

            padding: 0.2em 0.42em;
            height: 2em;
            width: 2em;
            border-radius: 2em;
            line-height: 1.5em;

            @media (min-width: 640px) {
                padding: 0.25em;
                height: 1.5em;
                width: 1.5em;
                border-radius: 2em;
                line-height: unset;
            }
        }
    }

    &:hover {
        background: $gradient, #5b21b6;

        @media (prefers-color-scheme: dark) {
            background: $gradient, #2e1065;
        }

        & + div > span {
            margin-top: -$hover-offset;
            margin-bottom: $hover-offset;
        }

        & + div + #emojies {
            span {
                opacity: 1;
            }
            span:nth-child(1) {
                margin-right: calc(0.35em + 7%);
                margin-bottom: 2.5em;
                transition-delay: $hover-duration * 0.25;
            }
            span:nth-child(2) {
                margin-bottom: 3.85em;
                margin-right: 2em;
                transition-delay: $hover-duration * 0.45;
            }
            span:nth-child(3) {
                margin-bottom: 4.35em;
                margin-right: 1em;
                transition-delay: $hover-duration * 0.65;
            }
            span:nth-child(4) {
                margin-bottom: 4.35em;
                margin-left: 1em;
                transition-delay: $hover-duration * 0.65;
            }
            span:nth-child(5) {
                margin-bottom: 3.85em;
                margin-left: 2em;
                transition-delay: $hover-duration * 0.85;
            }
            span:nth-child(6) {
                margin-left: calc(0.35em + 7%);
                margin-bottom: 2.5em;
                transition-delay: $hover-duration;
            }
        }
    }

    &:active {
        background: $gradient, #5b21b6;

        @media (prefers-color-scheme: dark) {
            background: $gradient, #2e1065;
        }

        box-shadow: inset 0 0.1em 1em rgba(black, 0.75);
    }
}

div:has(#the-done-button) {
    & + #process-intro {
        overflow: visible;
        & > p {
            margin-top: 0;
            transition-property: margin;
            transition-duration: $hover-duration;
        }
    }
}

div:has(#the-done-button:hover) {
    & + #process-intro > p {
        margin-top: 2 * $hover-offset;
        margin-bottom: -2 * $hover-offset;
        transition-property: margin;
        transition-duration: $hover-duration;
    }
}
